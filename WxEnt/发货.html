<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">

    <link rel="stylesheet" href="Assets/light7/dist/css/light7.min.css">

    <title>拼花大师™地板</title>
</head>
<body>

    <!-- page 容器 -->
    <div class="page page-current" id="main">
        <!-- 标题栏 -->
        <header class="bar bar-nav">
            <h1 class="title">单位列表</h1>
        </header>

        <!-- 这里是页面内容区 -->
        <div class="content">
            <div class="buttons-tab">
                <a href="#tab1" class="tab-link active button">全部</a>
                <a href="#tab2" class="tab-link button">客户</a>
                <a href="#tab3" class="tab-link button">委外</a>
            </div>

            <div class="tabs">
                <div id="tab1" class="tab active">
                    <div class="list-block">
                        <ul id="往来单位列表"></ul>
                    </div>
                </div>
                <div id="tab2" class="tab">
                    <div class="content-block">
                        <p>This is tab 2 content</p>
                    </div>
                </div>

            </div>

        </div>
    </div>
    <div class='popups'></div>
    
    <!-- 新增记录页 -->
    
    <script type='text/javascript' src='Scripts/jquery-2.2.1.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='Assets/light7/dist/js/light7.min.js' charset='utf-8'></script>
    <script type='text/javascript' src='Assets/light7/dist/js/i18n/cn.min.js' charset='utf-8'></script>

    <script type="text/javascript">
        function BuildActionsGroup(title, id) {
            var buttons1 = [{
                text: title,
                label: true
            },
            {
                text: '单位信息',
                //bold: true,
                color: 'primary',
                onClick: function () {
                    $.popup(".popup-" + id)
                }
            },
            {
                text: '发货明细',
                //bold: true,
                color: 'warning',
                onClick: function () {
                    $.confirm("确定删除该条记录吗？", "拼花大师™", function () {

                    })
                }
            }
            ];
            var buttons2 = [{
                text: '取消',
                bg: 'danger'
            }
            ];
            var groups = [buttons1, buttons2];
            return groups;
        }
    </script>
    <script type='text/javascript'>
        $.showPreloader();
        $.ajax({
            url: "发货.ashx?行为=往来单位",
            dataType: "json",
            success: function (data) {
                var s = "";
                var s2 = "";
                for (var i in data) {
                    s += "<li class='item-content item-link' id='" + data[i].单位编号 + "'>";
                    s += "<div class='item-media'><i class='icon icon-f7'></i></div>";
                    s += "<div class='item-inner'>";
                    s += "<div class='item-title'>" + data[i].单位名称 + "</div>";
                    //s += "<div class='item-after'><span class='color-primary'>" + data[i].单位编号 + "</span></div>";
                    s += "</div>";
                    s += "</li>";
                }
                for (var i in data) {
                    s2 += "<div class='popup popup-" + data[i].单位编号 + "'>";
                    s2 += "<header class='bar bar-nav'>";
                    s2 += "<h1 class='title'>单位信息</h1>";
                    s2 += "<a href='#' class='button button-link button-nav pull-left close-popup'>";
                    s2 += "<span class='icon icon-left'></span> 关闭"
                    s2 += "</a>"
                    s2 += "</header>"
                    s2 += "<div class='content'>"
                    s2 += "<div class='list-block'>"
                    s2 += "<ul>"
                    s2 += "<li>"
                    s2 += "<div class='item-content'>"
                    s2 += "<div class='item-media'><i class='icon icon-form-email'></i></div>"
                    s2 += "<div class='item-inner'>"
                    s2 += "<div class='item-title label'>单位编号</div>"
                    s2 += "<div class='item-input'>"
                    s2 += "<input type='text' placeholder='Company ID' value='" + data[i].单位编号 + "' readonly>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</li>"
                    s2 += "<li>"
                    s2 += "<div class='item-content'>"
                    s2 += "<div class='item-media'><i class='icon icon-form-name'></i></div>"
                    s2 += "<div class='item-inner'>"
                    s2 += "<div class='item-title label'>单位名称</div>"
                    s2 += "<div class='item-input'>"
                    s2 += "<input type='text' placeholder='Company Name' value='" + data[i].单位名称 + "' readonly>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</li>"
                    s2 += "<li>"
                    s2 += "<div class='item-content'>"
                    s2 += "<div class='item-media'><i class='icon icon-form-password'></i></div>"
                    s2 += "<div class='item-inner'>"
                    s2 += "<div class='item-title label'>RANK</div>"
                    s2 += "<div class='item-input'>"
                    s2 += "<input type='text' placeholder='Level' value='" + data[i].RANK + "' readonly>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</li>"
                    s2 += "<li>"
                    s2 += "<div class='item-content'>"
                    s2 += "<div class='item-media'><i class='icon icon-form-tel'></i></div>"
                    s2 += "<div class='item-inner'>"
                    s2 += "<div class='item-title label'>电话</div>"
                    s2 += "<div class='item-input'>"
                    s2 += "<input type='text' placeholder='Tel' value='" + data[i].电话 + "' readonly>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</li>"
                    s2 += "<li>"
                    s2 += "<div class='item-content'>"
                    s2 += "<div class='item-media'><i class='icon icon-form-url'></i></div>"
                    s2 += "<div class='item-inner'>"
                    s2 += "<div class='item-title label'>传真</div>"
                    s2 += "<div class='item-input'>"
                    s2 += "<input type='text' placeholder='Fax' value='" + data[i].传真 + "' readonly>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</li>"
                    s2 += "<li class='align-top'>"
                    s2 += "<div class='item-content'>"
                    s2 += "<div class='item-media'><i class='icon icon-form-comment'></i></div>"
                    s2 += "<div class='item-inner'>"
                    s2 += "<div class='item-title label'>地址</div>"
                    s2 += "<div class='item-input'>"
                    s2 += "<textarea readonly>" + data[i].单位地址 + "</textarea>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</li>"
                    s2 += "<li class='align-top'>"
                    s2 += "<div class='item-content'>"
                    s2 += "<div class='item-media'><i class='icon icon-form-comment'></i></div>"
                    s2 += "<div class='item-inner'>"
                    s2 += "<div class='item-title label'>备注</div>"
                    s2 += "<div class='item-input'>"
                    s2 += "<textarea readonly></textarea>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</li>"
                    s2 += "</ul>"
                    s2 += "</div>"
                    s2 += "</div>"
                    s2 += "</div>"
                }
                
                $("#往来单位列表").html(s).find("li").click(function () {
                    $.actions(BuildActionsGroup(this.id +" "+$(this).find(".item-title").text(), this.id));
                });
                $(".popups").html(s2);
            },
            error: function() {
                var s = "";
                s += "<li class='item-content item-link'>";
                s += "<div class='item-media'><i class='icon icon-f7'></i></div>";
                s += "<div class='item-inner'>";
                s += "<div class='item-title'>" + "加载失败" + "</div>";
                s += "</div>";
                s += "</li>";
                $("#往来单位列表").html(s);
            },
            complete: function () {
                $.hidePreloader();
            }
        })
    </script>
    

    
</body>

</html>
