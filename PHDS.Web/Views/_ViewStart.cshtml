@using PHDS.Identity.BLL
@using Microsoft.AspNet.Identity
@using Microsoft.AspNet.Identity.Owin
@{
    var UserManager = HttpContext.Current.GetOwinContext().Get<ApplicationUserManager>();
    var RoleManager = HttpContext.Current.GetOwinContext().Get<ApplicationRoleManager>();

    if (!User.Identity.IsAuthenticated)
    {
        Layout = "~/Views/Shared/_Layout_Guest.cshtml";
    }
    else
    {
        if (UserManager.IsInRole(User.Identity.GetUserId(),"管理员"))
        {
            Layout = "~/Views/Shared/_Layout_Administrator.cshtml";
        }
        else if(UserManager.IsInRole(User.Identity.GetUserId(), "对账员"))
        {
            Layout = "~/Views/Shared/_Layout_Treasurer.cshtml";
        }
        else
        {
            Layout = "~/Views/Shared/_Layout_Guest.cshtml";
        }
    }
}